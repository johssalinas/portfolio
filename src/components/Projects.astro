---
import NextIcon from "./icons/Next.astro";
import TailwindIcon from "./icons/Tailwind.astro";

interface Props {
  dict: any;
}
const { dict } = Astro.props;

interface ProjectTag {
  name: string;
  class: string;
  icon: any;
}

interface Project {
  title: string;
  description: string;
  link: string;
  github: string;
  image: string;
  tags: ProjectTag[];
}

const TAGS = {
  NEXT: {
    name: dict.projects?.tag_next || "Next.Js",
    class: "bg-black text-white",
    icon: NextIcon,
  },
  TAILWIND: {
    name: dict.projects?.tag_tailwind || "TailwindCSS",
    class: "bg-[#003159] text-white",
    icon: TailwindIcon,
  },
};

const PROJECTS = dict.projects?.items || [
  {
    title: "Helados Sofis",
    description: "Gestión de inventario y ventas para una heladería",
    link: "https://helados-sofis.vercel.app/entry",
    github: "https://github.com/johssalinas/helados-sofis",
    image: "/projects/helados-sofis.webp",
    tags: [TAGS.NEXT, TAGS.TAILWIND],
  },
];
---

{
  (
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
      {Array.isArray(PROJECTS)
        ? PROJECTS.map((project: Project) => {
            const { title, description, link, github, image, tags } = project;
            return (
              <article class="rounded-lg p-4 bg-transparent">
                <div class="flex flex-col sm:flex-row gap-4 items-start">
                  <div class="w-full sm:w-1/2">
                    <img
                      class="rounded w-full h-auto object-cover max-h-56 sm:max-h-40 shadow-2xl shadow-white/10"
                      src={image}
                      alt={title}
                    />
                  </div>
                  <div class="w-full sm:w-1/2">
                    <h3 class="text-2xl sm:text-3xl font-semibold text-yellow-200 mb-2">
                      {title}
                    </h3>
                    <p class="text-sm sm:text-base text-pretty mb-4">
                      {description}
                    </p>
                    <div class="flex flex-wrap gap-2 mb-3">
                      {tags.map((tag) => (
                        <span
                          class={`inline-flex items-center gap-x-2 rounded-full text-xs ${tag.class} py-1 px-3`}
                        >
                          <tag.icon class="size-4" /> {tag.name}
                        </span>
                      ))}
                    </div>
                    <div class="flex gap-3">
                      <a class="text-yellow-200 underline" href={link}>
                        {dict.projects?.view_project || "Ver proyecto"}
                      </a>
                      <a class="text-white/80 underline" href={github}>
                        {dict.projects?.view_code || "Ver código fuente"}
                      </a>
                    </div>
                  </div>
                </div>
              </article>
            );
          })
        : null}
    </div>
  )
}
