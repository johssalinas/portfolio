---
interface Props {
  lang: "es" | "en";
  dict: any;
}
const { lang, dict } = Astro.props;
---

<header class="sticky top-0 z-50 bg-[#00091d]/80 backdrop-blur shadow-md">
  <nav
    class="w-full max-w-5xl px-4 mx-auto flex items-center justify-between py-5"
    aria-label="Main navigation"
  >
    <div class="flex items-center gap-4">
      <!-- Flowbite collapse toggle for mobile -->
      <button
        data-collapse-toggle="mobile-menu"
        type="button"
        class="md:hidden inline-flex items-center justify-center p-2 rounded-md text-blue-100 bg-[#00091d] backdrop-blur shadow-md focus:outline-none focus:ring-2 focus:ring-blue-300"
        aria-controls="mobile-menu"
        aria-expanded="false"
      >
        <span class="sr-only">{dict.header.open_menu}</span>
        <svg
          class="h-6 w-6"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>

      <a href={`/${lang}/#top`} class="text-sm font-medium text-blue-100"
        >{dict.header.home}</a
      >
    </div>

    <!-- Desktop nav -->
    <ul class="hidden md:flex md:items-center md:gap-x-8 text-sm opacity-90">
      <li><a href={`/${lang}/#sobremi`}>{dict.header.about}</a></li>
      <li><a href={`/${lang}/#experiencia`}>{dict.header.experience}</a></li>
      <li><a href={`/${lang}/#proyectos`}>{dict.header.projects}</a></li>
      <li><a href={`/${lang}/#contacto`}>{dict.header.contact}</a></li>
    </ul>

    <div class="flex items-center gap-3">
      <div class="hidden md:flex items-center gap-4">
        <!-- CV dropdown (Flowbite) -->
        <div class="relative">
          <button
            id="cv-dropdown-button"
            data-dropdown-toggle="cv-dropdown"
            class="text-sm bg-blue-900 text-blue-100 border border-blue-300 rounded-lg text-base font-medium px-4 py-1 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-300"
            type="button"
          >
            {lang === "es" ? "CV" : "CV"}
          </button>
          <div
            id="cv-dropdown"
            class="hidden z-10 w-44 bg-[#071025] rounded divide-y divide-gray-600 shadow"
          >
            <ul
              class="py-1 text-sm text-blue-100"
              aria-labelledby="cv-dropdown-button"
            >
              <li>
                <a href={`/${lang}/cv/`} class="block px-4 py-2">Ver CV</a>
              </li>
              <li>
                <a href="/assets/cv.pdf" download class="block px-4 py-2"
                  >Descargar CV</a
                >
              </li>
            </ul>
          </div>
        </div>

        <!-- Language dropdown (Flowbite) -->
        <div class="relative">
          <button
            id="lang-dropdown-button"
            data-dropdown-toggle="lang-dropdown"
            class="ml-2 text-sm bg-blue-900 text-blue-100 border border-blue-300 rounded-lg text-base font-medium px-4 py-1 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-300"
            type="button"
          >
            {lang === "es" ? "ES" : "EN"}
          </button>
          <div
            id="lang-dropdown"
            class="hidden z-10 w-32 bg-[#071025] rounded divide-y divide-gray-600 shadow"
          >
            <ul
              class="py-1 text-sm text-blue-100"
              aria-labelledby="lang-dropdown-button"
            >
              <li><a href="/es/" class="block px-4 py-2">ES</a></li>
              <li><a href="/en/" class="block px-4 py-2">EN</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile menu (collapsible) -->
    <div class="md:hidden w-full hidden" id="mobile-menu">
      <div class="py-4 px-4 bg-[#00091d] text-blue-100 rounded-b-lg">
        <a href={`/${lang}/#sobremi`} class="block py-2">{dict.header.about}</a>
        <a href={`/${lang}/#experiencia`} class="block py-2"
          >{dict.header.experience}</a
        >
        <a href={`/${lang}/#proyectos`} class="block py-2"
          >{dict.header.projects}</a
        >
        <a href={`/${lang}/#contacto`} class="block py-2"
          >{dict.header.contact}</a
        >

        <div class="mt-4">
          <a href="/es/" class="block py-2">ES</a>
          <a href="/en/" class="block py-2">EN</a>
        </div>

        <div class="mt-4">
          <a href={`/${lang}/cv/`} class="block py-2">Ver CV</a>
          <a href="/assets/cv.pdf" download class="block py-2">Descargar CV</a>
        </div>
      </div>
    </div>
  </nav>
</header>
